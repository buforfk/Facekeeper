{include file="header.html"}
{include file="report/menu.html"}
<div id="main">
<h2>歷史報表列表</h2>

{if $NotifyMessage}
    <div class="message">{$NotifyMessage.message}</div>
{/if}

<table class="sortable">
    <thead>
    <tr>
        <th><abbr title="該報表生成的時間">產生時間</abbr></th>
        <th><abbr title="點選後，會開啟該報表頁面">檔名</abbr></th>
        <th width="80"><abbr title="以 bytes 計算">檔案大小</abbr></th>
        <th width="100"><button class="select-all">全選</button><button class="select-none">全不選</button><button class="delete">刪除</button></th>
    </tr>
    </thead>
    <tbody>
    {section name=sec1 loop=$report}
    <tr id="row-{$report[sec1].id}">
        <td>{$report[sec1].time}</td>
        <td><a target="_blank" href="{$bPack_rootpath}tmp/Report/{$report[sec1].filename}">{$report[sec1].filename}</a></td>
        <td>{$report[sec1].filesize}</td>
        <td><input type="checkbox" name="item-{$report[sec1].id}" class="item" value="{$report[sec1].id}" /></td>
    </tr>
    {/section}
    </tbody>
</table>

</div>

{literal}
<script type="text/javascript">
    $("button.delete").button({icons:{primary:'ui-icon-trash'}}).click(function(){
        $.post("{/literal}{$bPack_rootpath}{literal}report/history/bulk_delete", $("input.item").serializeArray(), function(data){
            window.location.reload();
        },"json")
    });

    $("button.select-all").button({icons:{primary:'ui-icon-circlesmall-plus'}}).click(function(){
         $("input[type='checkbox']:not([disabled='disabled'])").attr('checked', true);
    });

    $("button.select-none").button({icons:{primary:'ui-icon-circlesmall-minus'}}).click(function(){
         $("input[type='checkbox']:not([disabled='disabled'])").attr('checked', false);
    });
</script>
{/literal}
{include file="footer.html"}
